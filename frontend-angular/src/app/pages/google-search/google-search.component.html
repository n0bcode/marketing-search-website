
<div class="container mx-auto p-4 sm:p-6 lg:p-8 space-y-6">
  <!-- Secret Token Panel -->
  <app-secret-token-panel
    [isShowViewSettingToken]="isShowViewSettingToken()"
    [listServices]="listServices()"
    [listSecretDTOsMap]="listSecretDTOsMap()"
    [listSelectSecretToken]="listSelectSecretToken()"
    [secretTokenDTO]="secretTokenDTO()"
    (toggleSettings)="onToggleSettings()"
    (createToken)="onCreateToken($event)"
  ></app-secret-token-panel>

  <!-- Search Area -->
  <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
    <!-- Search Form -->
    <div class="lg:col-span-1">
      <app-search-form
        [searchParameters]="searchParameters()"
        (searchParametersChange)="onSearchParametersChange($event)"
        [startDate]="startDate()"
        [endDate]="endDate()"
        [today]="today()"
        [dictionaryListSites]="dictionaryListSites()"
        [listSitesSelected]="listSitesSelected()"
        [newDomain]="newDomain()"
        [isLoading]="isLoading()"
        (search)="onSearch()"
        (updateSites)="onUpdateSites($event)"
        (addDomain)="onAddDomain()"
      ></app-search-form>
    </div>

    <!-- Results and History -->
    <div class="lg:col-span-3 space-y-6">
      <!-- Error Message -->
      <div
        *ngIf="errorMessageResponse()"
        class="bg-danger/10 text-danger font-semibold p-4 rounded-lg shadow-md"
      >
        {{ errorMessageResponse() }}
      </div>

      <!-- Search Results -->
      <app-search-results
        [searchResultsList]="searchResultsList()"
        [selectedSite]="selectedSite()"
        [searchResults]="searchResults()"
        [isLoading]="isLoading()"
        [analysisLink]="analysisLink()"
        [mainDataAnalysisLinkSocialVideo]="mainDataAnalysisLinkSocialVideo()"
        [isShowModal]="isShowModal()"
        [isLoadingDataForModal]="isLoadingDataForModal()"
        (selectSite)="onSelectSite($event)"
        (analyzeLink)="onAnalyzeLink($event)"
        (analyzeVideo)="onAnalyzeVideo($event)"
      ></app-search-results>

      <!-- Search History -->
      <app-search-history
        [showKeywordHistory]="showKeywordHistory()"
        [keywordModels]="keywordModels()"
        (toggleHistory)="onToggleHistory()"
        (loadAnalysis)="onLoadAnalysis($event)"
      ></app-search-history>
    </div>
  </div>
</div>

